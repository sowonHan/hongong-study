<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>8절 예외 처리</title>
    <script>
      /* 기본 예외 처리 */
      document.addEventListener("DOMContentLoaded", () => {
        const h1 = document.querySelector("h1");
        if (h1) {
          h1.textContent = "h1 태그 추출 성공";
        } else {
          console.log("h1 태그를 추출할 수 없습니다.");
        }
      });

      /* 고급 예외 처리 */
      try {
        // (예외가 발생할 가능성이 있는) 일반 코드
        willExcept.byeBye(); // 존재하지 않는 변수와 메소드로 예외 발생
        console.log("try 구문의 마지막 줄");
      } catch (exception) {
        // try 구문 안에서 예외가 발생했을 때 실행할 코드
        console.log("catch 구문의 마지막 줄");
      } finally {
        // 필수 사항 아님!! 예외 발생 여부와 상관 없이 실행할 코드
        console.log("finally 구문의 마지막 줄");
      }
      // ※ catch와 finally 둘 중 하나는 생략될 수 있다.

      /* finally 구문의 필요성 */
      function test1() {
        try {
          alert("A 위치입니다.");
          // throw 키워드를 사용해 강제로 예외를 발생시킨다.
          throw "예외 강제 발생";
        } catch (exception) {
          // catch 구문 괄호 안에 입력하는 식별자 exception을 예외 객체라고 한다. 예외 객체는 발생된 예외에 대한 정보를 담고 있다. 보통 e, err, exception 같은 식별자로 사용
          alert("B 위치입니다.");
          return;
          // return을 통해 함수를 벗어났기 때문에 c 문구는 출력하지 않는다.
        }
        alert("C 위치입니다.");
      }

      test1();

      function test2() {
        try {
          alert("A2 위치입니다.");
          throw "예외 강제 발생";
        } catch (exception) {
          alert("B2 위치입니다.");
          return;
        } finally {
          alert("C2 위치입니다.");
          // finally 구문은 반드시 실행하기 때문에 출력된다.
        }
      }

      test2();
    </script>
  </head>
  <body></body>
</html>
